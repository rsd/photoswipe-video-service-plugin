var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{A:()=>d});const o={youtubeAttributes:{controls:!1,playsinline:!0,preload:"auto",autoplay:!1,rel:!1},vimeoAttributes:{autoplay:!1,loop:!1,controls:!0},playOnActivate:!0,stopOnDeactivate:!0,preventDragOffset:40};function n(e){return e&&(e.data&&"youtube"===e.data.type||e.type&&"youtube"===e.type)}const i=class{constructor(e,t){this.options=t,this.youTubeAPIReady=!1,this.youTubeAPILoading=!1,this.youTubeAPIReadyCallbacks=[],this.playerCounter={},this.initLightboxEvents(e),e.on("init",(()=>{this.initPswpEvents(e.pswp)}))}initLightboxEvents(e){e.on("contentLoad",this.onContentLoad.bind(this)),e.on("contentDestroy",this.onContentDestroy.bind(this)),e.on("contentActivate",this.onContentActivate.bind(this)),e.on("contentDeactivate",this.onContentDeactivate.bind(this)),e.on("contentAppend",this.onContentAppend.bind(this)),e.on("contentResize",this.onContentResize.bind(this)),e.addFilter("isKeepingPlaceholder",this.isKeepingPlaceholder.bind(this)),e.addFilter("isContentZoomable",this.isContentZoomable.bind(this)),e.addFilter("useContentPlaceholder",this.useContentPlaceholder.bind(this)),e.addFilter("domItemData",((e,t,o)=>(n(e)&&(o.dataset.pswpVideoSources?e.videoSources=JSON.parse(o.dataset.pswpVideoSources):o.dataset.pswpVideoSrc?e.videoSrc=o.dataset.pswpVideoSrc:o.getAttribute("href")&&(e.videoSrc=o.getAttribute("href"))),e)))}initPswpEvents(e){e.on("appendHeavy",(e=>{n(e.slide)&&!e.slide.isActive&&e.preventDefault()})),e.on("close",(()=>{n(e.currSlide.content)&&(e.options.showHideAnimationType&&"zoom"!==e.options.showHideAnimationType||(e.options.showHideAnimationType="fade"),this.pauseVideo(e.currSlide.content))}))}onContentLoad(e){const t=e.content;n(t)&&(e.preventDefault(),"loading"!==t.state&&"loaded"!==t.state&&(t.state="loading",t.type="youtube",this.loadYouTubeVideo(t)))}onContentDestroy({content:e}){n(e)&&(e._videoPosterImg&&(e._videoPosterImg.onload=null,e._videoPosterImg.onerror=null,e._videoPosterImg=null),e.element&&(e.player&&"function"==typeof e.player.destroy&&(e.player.destroy(),e.player=null),e.element=null))}onContentActivate({content:e}){n(e)&&e.player&&"function"==typeof e.player.playVideo&&this.options.playOnActivate&&e.player.playVideo()}onContentDeactivate({content:e}){n(e)&&e.player&&"function"==typeof e.player.pauseVideo&&this.options.stopOnDeactivate&&e.player.pauseVideo()}onContentAppend(e){const{content:t}=e;n(t)&&(e.preventDefault(),"not-appended"===t.status&&(t.status="appended",this.loadYouTubeVideo(t)))}onContentResize(e){n(e.content)&&e.preventDefault()}isKeepingPlaceholder(e,t){return!n(t)&&e}isContentZoomable(e,t){return!n(t)&&e}useContentPlaceholder(e,t){return!n(t)&&e}playVideo(e){e.element&&e.element.play&&e.element.play()}pauseVideo(e){e.element&&e.element.pause&&e.element.pause()}loadYouTubeVideo(e){const t=document.createElement("div");t.id="pswp-youtube-player-"+e.index,e.element=t,this.loadYouTubeAPI().then((()=>{const o=this.extractYouTubeVideoId(e.data.videoSrc||e.data.src);o?e.slide?(e.slide.container.appendChild(e.element),e.player=new YT.Player(t.id,{videoId:o,height:e.height,width:e.width,playerVars:{autoplay:this.options.youtubeAttributes.autoplay?1:0,controls:this.options.youtubeAttributes.controls?1:0,rel:this.options.youtubeAttributes.rel?1:0,playsinline:this.options.youtubeAttributes.playsinline?1:0},events:{onReady:()=>{e.instance.currIndex===e.index&&this.options.playOnActivate&&e.player.playVideo(),e.onLoaded()},onError:t=>{e.onError()}}}),this.playerCounter[t.id]=e.player):e.status="not-appended":e.onError()}))}loadYouTubeAPI(){return new Promise((e=>{if(this.youTubeAPIReady)return void e();if(this.youTubeAPILoading)return void this.youTubeAPIReadyCallbacks.push(e);this.youTubeAPILoading=!0,this.youTubeAPIReadyCallbacks.push(e);const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",t.async=!0;const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o);const n=this;window.onYouTubeIframeAPIReady=function(){n.youTubeAPIReady=!0,n.youTubeAPILoading=!1,n.youTubeAPIReadyCallbacks.forEach((e=>e())),n.youTubeAPIReadyCallbacks=[]}}))}extractYouTubeVideoId(e){const t=e.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?|shorts)\/|.*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t&&t[1]?t[1]:null}};function a(e){return e&&(e.data&&"vimeo"===e.data.type||e.type&&"vimeo"===e.type)}const s=class{constructor(e,t){this.options=t,this.vimeoAPIReady=!1,this.vimeoAPILoading=!1,this.vimeoAPIReadyCallbacks=[],this.playerCounter={},this.initLightboxEvents(e),e.on("init",(()=>{this.initPswpEvents(e.pswp)}))}initLightboxEvents(e){e.on("contentLoad",this.onContentLoad.bind(this)),e.on("contentDestroy",this.onContentDestroy.bind(this)),e.on("contentActivate",this.onContentActivate.bind(this)),e.on("contentDeactivate",this.onContentDeactivate.bind(this)),e.on("contentAppend",this.onContentAppend.bind(this)),e.on("contentResize",this.onContentResize.bind(this)),e.addFilter("isKeepingPlaceholder",this.isKeepingPlaceholder.bind(this)),e.addFilter("isContentZoomable",this.isContentZoomable.bind(this)),e.addFilter("useContentPlaceholder",this.useContentPlaceholder.bind(this)),e.addFilter("domItemData",((e,t,o)=>(a(e)&&(o.dataset.pswpVideoSources?e.videoSources=JSON.parse(o.dataset.pswpVideoSources):o.dataset.pswpVideoSrc?e.videoSrc=o.dataset.pswpVideoSrc:o.getAttribute("href")&&(e.videoSrc=o.getAttribute("href"))),e)))}initPswpEvents(e){e.on("appendHeavy",(e=>{a(e.slide)&&!e.slide.isActive&&e.preventDefault()})),e.on("close",(()=>{a(e.currSlide.content)&&(e.options.showHideAnimationType&&"zoom"!==e.options.showHideAnimationType||(e.options.showHideAnimationType="fade"),this.pauseVideo(e.currSlide.content))}))}onContentLoad(e){const t=e.content;a(t)&&(e.preventDefault(),"loading"!==t.state&&"loaded"!==t.state&&(t.state="loading",t.type="vimeo",this.loadVimeoVideo(t)))}onContentDestroy({content:e}){a(e)&&(e._videoPosterImg&&(e._videoPosterImg.onload=null,e._videoPosterImg.onerror=null,e._videoPosterImg=null),e.element&&(e.player&&"function"==typeof e.player.destroy&&(e.player.destroy(),e.player=null),e.element=null))}onContentActivate({content:e}){a(e)&&e.player&&"function"==typeof e.player.play&&this.options.playOnActivate&&e.player.play()}onContentDeactivate({content:e}){a(e)&&e.player&&"function"==typeof e.player.pause&&this.options.stopOnDeactivate&&e.player.pause()}onContentAppend(e){const{content:t}=e;a(t)&&(e.preventDefault(),"not-appended"===t.status&&(t.status="appended",this.loadVimeoVideo(t)))}onContentResize(e){a(e.content)&&e.preventDefault()}isKeepingPlaceholder(e,t){return!a(t)&&e}isContentZoomable(e,t){return!a(t)&&e}useContentPlaceholder(e,t){return!a(t)&&e}playVideo(e){e.player&&"function"==typeof e.player.play&&e.player.play()}pauseVideo(e){e.player&&"function"==typeof e.player.pause&&e.player.pause()}loadVimeoVideo(e){const t=document.createElement("div");t.id="pswp-vimeo-player-"+e.index,e.element=t,this.loadVimeoAPI().then((()=>{const o=this.extractVimeoVideoId(e.data.videoSrc||e.data.src);if(!o)return void e.onError();if(!e.slide)return void(e.status="not-appended");e.slide.container.appendChild(e.element);const n={id:o,width:e.width,autoplay:!!this.options.vimeoAttributes.autoplay,loop:!!this.options.vimeoAttributes.loop,controls:!!this.options.vimeoAttributes.controls};e.player=new Vimeo.Player(t,n),e.player.ready().then((()=>{e.instance.currIndex===e.index&&this.options.playOnActivate&&e.player.play(),e.onLoaded()})).catch((t=>{e.onError()})),this.playerCounter[t.id]=e.player}))}loadVimeoAPI(){return new Promise((e=>{if(this.vimeoAPIReady)return void e();if(this.vimeoAPILoading)return void this.vimeoAPIReadyCallbacks.push(e);this.vimeoAPILoading=!0,this.vimeoAPIReadyCallbacks.push(e);const t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",t.async=!0,t.onload=()=>{this.vimeoAPIReady=!0,this.vimeoAPILoading=!1,this.vimeoAPIReadyCallbacks.forEach((e=>e())),this.vimeoAPIReadyCallbacks=[]},t.onerror=()=>{this.vimeoAPILoading=!1,this.vimeoAPIReadyCallbacks=[]};const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)}))}extractVimeoVideoId(e){const t=e.match(/vimeo.*(?:\/|clip_id=)([0-9]+)/i);return t&&t[1]?t[1]:null}},d=class{constructor(e,t){const n={...o,...t};this.youtubeSetup=new i(e,n),this.vimeoSetup=new s(e,n)}};var r=t.A;export{r as default};