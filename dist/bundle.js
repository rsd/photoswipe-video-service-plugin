!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.PhotoSwipeYoutubePlugin=o():e.PhotoSwipeYoutubePlugin=o()}(this,(()=>(()=>{"use strict";var e={d:(o,t)=>{for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>p});var t={youtubeAttributes:{controls:!1,playsinline:!0,preload:"auto",autoplay:!1,rel:!1},preventDragOffset:40};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var o=function(e){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var t=o.call(e,"string");if("object"!=n(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(o)?o:o+""}function i(e){return e&&e.data&&("youtube"===e.data.type||"youtube"===e.type)}const a=function(){return e=function e(o,t){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.youTubeAPIReady=!1,this.youTubeAPILoading=!1,this.youTubeAPIReadyCallbacks=[],console.log("YoutubeVideoSetup",o,t),this.initLightboxEvents(o)},o=[{key:"initLightboxEvents",value:function(e){e.on("contentLoad",this.onContentLoad.bind(this))}},{key:"onContentLoad",value:function(e){var o=e.content;console.log(o),i(o)&&(e.preventDefault(),"loading"!==o.state&&"loaded"!==o.state&&(console.log(o.type,o.state),o.state="loading",o.type="youtube",this.loadYouTubeVideo(o)))}},{key:"onContentDestroy",value:function(e){var o=e.content;console.log("Destroying Content:",o),i(o)&&(o._videoPosterImg&&(o._videoPosterImg.onload=null,o._videoPosterImg.onerror=null,o._videoPosterImg=null),o.element&&("youtube"===o.data.type?(o.player&&"function"==typeof o.player.destroy&&(o.player.destroy(),o.player=null),o.element=null):o.element=null))}},{key:"loadYouTubeVideo",value:function(e){var o=this;this.loadYouTubeAPI().then((function(){var t;console.log("YouTube IFrame API Loaded");var n=document.createElement("div");n.id="pswp-youtube-player-"+e.index,console.log(e.data.videoSrc,e.data.src);var r=o.extractYouTubeVideoId(e.data.videoSrc||e.data.src);if(console.log("Extracted Video ID:",r),!r)return console.error("Invalid YouTube URL"),void e.onError();console.log("Creating YouTube Player"),e.element=n,null!=e&&null!==(t=e.slide)&&void 0!==t&&t.container?(e.slide.container.appendChild(e.element),console.log(e),console.log(n.id),e.player=new YT.Player(n.id,{videoId:r,height:e.height,width:e.width,playerVars:{autoplay:o.options.youtubeAttributes.autoplay?1:0,controls:o.options.youtubeAttributes.controls?1:0,rel:o.options.youtubeAttributes.rel?1:0,playsinline:o.options.youtubeAttributes.playsinline?1:0},events:{onReady:function(){console.log("YouTube Player Ready"),e.onLoaded()},onStateChange:function(e){console.log("Player State Changed:",e.data)},onError:function(o){console.log("YouTube Player Error:",o),e.onError()}}})):console.error("No content.slide.container")})).catch((function(){console.error("Failed to load YouTube IFrame API"),e.onError()}))}},{key:"loadYouTubeAPI",value:function(){var e=this;return new Promise((function(o){if(e.youTubeAPIReady)o();else if(e.youTubeAPILoading)e.youTubeAPIReadyCallbacks.push(o);else{e.youTubeAPILoading=!0,e.youTubeAPIReadyCallbacks.push(o);var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",t.async=!0;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),console.log("Loading YouTube IFrame API");var r=e;window.onYouTubeIframeAPIReady=function(){console.log("YouTube IFrame API Ready"),r.youTubeAPIReady=!0,r.youTubeAPILoading=!1,r.youTubeAPIReadyCallbacks.forEach((function(e){return e()})),r.youTubeAPIReadyCallbacks=[]}}}))}},{key:"extractYouTubeVideoId",value:function(e){var o=e.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?|shorts)\/|.*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return o&&o[1]?o[1]:null}}],o&&r(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?c(Object(t),!0).forEach((function(o){s(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function s(e,o,t){return(o=f(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function b(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function d(e,o,t){return o&&b(e.prototype,o),t&&b(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var o=function(e){if("object"!=l(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var t=o.call(e,"string");if("object"!=l(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(o)?o:o+""}const p=d((function e(o,n){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),new a(o,y(y({},t),n))}));return o})()));